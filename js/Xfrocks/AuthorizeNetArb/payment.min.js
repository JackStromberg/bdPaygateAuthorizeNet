((t,e)=>{"use strict";XF.AuthorizeNetArb_PayForm=XF.Element.newHandler({options:{apiLoginId:null,hiddenInputSelector:"[name=opaque_data]",phrasePreparing:null,phraseProcessing:null,progressTextSelector:null,publicClientKey:null},xhr:null,init:function(){this.options.apiLoginId?this.options.publicClientKey?(this.hiddenInput=this.target.querySelector(this.options.hiddenInputSelector),this.hiddenInput?(this.progressText=this.target.querySelector(this.options.progressTextSelector),document.addEventListener("ajax-submit:before",this.onBeforeAjaxSubmit.bind(this.target)),document.addEventListener("ajax-submit:always",this.onBeforeAjaxAlways.bind(this.target)),document.addEventListener("submit",this.onSubmit.bind(this.target))):console.error("Form must contain a data-hidden-input-selector attribute.")):console.error("Form must contain a data-public-client-key attribute."):console.error("Form must contain a data-api-login-id attribute.")},onBeforeAjaxSubmit:function(t,e){if(e.ajaxOptions.timeout=9e4,this.hiddenInput.value)return this.progressText.textContent=this.options.phraseProcessing,!0;t.preventDefault()},onBeforeAjaxAlways:function(){this.hiddenInput.value="",this.progressText.textContent=""},onSubmit:function(t){if(this.hiddenInput.value)return!0;t.preventDefault();t.preventSubmit=true;var e={},i={},n={},s=this,a=function(t,e,i){void 0===i&&(i=e);var n=s.target.querySelector('input[rel="'+i+'"]'),a=n?n.value:null;if(!a){const t=s.target.querySelector('select[rel="'+i+'"]');a=t?t.value:null}a&&(t[e]=a)};return a(n,"cardNumber","card-number"),a(n,"month"),a(n,"year"),a(n,"cardCode","card-code"),e.cardData=n,i.apiLoginID=this.options.apiLoginId,i.clientKey=this.options.publicClientKey,e.authData=i,this._callAjaxSubmit("disableButtons"),this.progressText.textContent=this.options.phrasePreparing,Accept.dispatchData(e,this.onAcceptJsResponse.bind(this)),!1},onAcceptJsResponse:function(e){if(this.progressText.textContent="",this._callAjaxSubmit("enableButtons"),e.messages&&"Error"===e.messages.resultCode){for(var i=e.messages,n=[],s=0;s<i.message.length;s++){var a=i.message[s];console.error(a.code+": "+a.text),n.push(a.text)}XF.alert(n.join("<br />"))}else{this.hiddenInput.value=JSON.stringify(e.opaqueData);var r=this;t.setTimeout((function(){r._callAjaxSubmit("submit")}),0)}},_callAjaxSubmit:function(t,e){var i=this.target.dataset.xfElementHandlers?JSON.parse(this.target.dataset.xfElementHandlers):{};if(void 0!==i["ajax-submit"])return i["ajax-submit"][t].apply(i["ajax-submit"],e)}}),XF.Element.register("authorizenet-payment-form","XF.AuthorizeNetArb_PayForm")})(window,document);
!function(t,e,i,n){"use strict";XF.Xfrocks_AuthorizeNetArb_PayForm=XF.Element.newHandler({options:{apiLoginId:null,hiddenInputSelector:"[name=opaque_data]",phrasePreparing:null,phraseProcessing:null,progressTextSelector:null,publicClientKey:null},xhr:null,init:function(){this.options.apiLoginId?this.options.publicClientKey?(this.$hiddenInput=this.$target.find(this.options.hiddenInputSelector),1===this.$hiddenInput.length?(this.$progressText=this.$target.find(this.options.progressTextSelector),this.$target.bind({"ajax-submit:before":t.proxy(this,"onBeforeAjaxSubmit"),"ajax-submit:always":t.proxy(this,"onBeforeAjaxAlways"),submit:t.proxy(this,"onSubmit")})):console.error("Form must contain a data-hidden-input-selector attribute.")):console.error("Form must contain a data-public-client-key attribute."):console.error("Form must contain a data-api-login-id attribute.")},onBeforeAjaxSubmit:function(t,e){if(e.ajaxOptions.timeout=9e4,this.$hiddenInput.val())return this.$progressText.text(this.options.phraseProcessing),!0;t.preventDefault()},onBeforeAjaxAlways:function(){this.$hiddenInput.val(""),this.$progressText.text("")},onSubmit:function(e){if(this.$hiddenInput.val())return!0;e.preventDefault();var i={},s={},r={},a=this,o=function(t,e,i){i===n&&(i=e);var s=a.$target.find("input[rel="+i+"]").val();s||(s=a.$target.find("select[rel="+i+"] option:selected").val()),s&&(t[e]=s)};return o(r,"cardNumber","card-number"),o(r,"month"),o(r,"year"),o(r,"cardCode","card-code"),i.cardData=r,s.apiLoginID=this.options.apiLoginId,s.clientKey=this.options.publicClientKey,i.authData=s,this._callAjaxSubmit("disableButtons"),this.$progressText.text(this.options.phrasePreparing),Accept.dispatchData(i,t.proxy(this,"onAcceptJsResponse")),!1},onAcceptJsResponse:function(t){if(this.$progressText.text(""),this._callAjaxSubmit("enableButtons"),t.messages&&"Error"===t.messages.resultCode){for(var i=t.messages,n=[],s=0;s<i.message.length;s++){var r=i.message[s];console.error(r.code+": "+r.text),n.push(r.text)}XF.alert(n.join("<br />"))}else{this.$hiddenInput.val(JSON.stringify(t.opaqueData));var a=this;e.setTimeout((function(){a._callAjaxSubmit("submit")}),0)}},_callAjaxSubmit:function(t,e){var i=this.$target.data("xf-element-handlers");if(i["ajax-submit"]!==n)return i["ajax-submit"][t].apply(i["ajax-submit"],e)}}),XF.Element.register("authorizenet-payment-form","XF.Xfrocks_AuthorizeNetArb_PayForm")}(jQuery,window,document);
!function(g,l,n,h){XF.Xfrocks_AuthorizeNetArb_PayForm=XF.Element.newHandler({options:{apiLoginId:null,hiddenInputSelector:"[name=opaque_data]",phrasePreparing:null,phraseProcessing:null,progressTextSelector:null,publicClientKey:null},xhr:null,init:function(){this.options.apiLoginId?this.options.publicClientKey?(this.$hiddenInput=this.$target.find(this.options.hiddenInputSelector),1!==this.$hiddenInput.length?console.error("Form must contain a data-hidden-input-selector attribute."):(this.$progressText=
this.$target.find(this.options.progressTextSelector),this.$target.bind({"ajax-submit:before":g.proxy(this,"onBeforeAjaxSubmit"),"ajax-submit:always":g.proxy(this,"onBeforeAjaxAlways"),submit:g.proxy(this,"onSubmit")}))):console.error("Form must contain a data-public-client-key attribute."):console.error("Form must contain a data-api-login-id attribute.")},onBeforeAjaxSubmit:function(a,c){c.ajaxOptions.timeout=9E4;if(this.$hiddenInput.val())return this.$progressText.text(this.options.phraseProcessing),
!0;a.preventDefault()},onBeforeAjaxAlways:function(){this.$hiddenInput.val("");this.$progressText.text("")},onSubmit:function(a){if(this.$hiddenInput.val())return!0;a.preventDefault();a={};var c={},b={},e=this,d=function(m,k,f){f===h&&(f=k);(f=e.$target.find("input[rel="+f+"]").val())&&(m[k]=f)};d(b,"cardNumber","card-number");d(b,"month");d(b,"year");d(b,"cardCode","card-code");a.cardData=b;c.apiLoginID=this.options.apiLoginId;c.clientKey=this.options.publicClientKey;a.authData=c;this._callAjaxSubmit("disableButtons");
this.$progressText.text(this.options.phrasePreparing);Accept.dispatchData(a,g.proxy(this,"onAcceptJsResponse"));return!1},onAcceptJsResponse:function(a){this.$progressText.text("");this._callAjaxSubmit("enableButtons");if(a.messages&&"Error"===a.messages.resultCode){a=a.messages;for(var c=[],b=0;b<a.message.length;b++){var e=a.message[b];console.error(e.code+": "+e.text);c.push(e.text)}XF.alert(c.join("<br />"))}else{this.$hiddenInput.val(JSON.stringify(a.opaqueData));var d=this;l.setTimeout(function(){d._callAjaxSubmit("submit")},
0)}},_callAjaxSubmit:function(a,c){var b=this.$target.data("xf-element-handlers");if(b["ajax-submit"]!==h)return b["ajax-submit"][a].apply(b["ajax-submit"],c)}});XF.Element.register("authorizenet-payment-form","XF.Xfrocks_AuthorizeNetArb_PayForm")}(jQuery,window,document);